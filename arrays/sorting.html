<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>10.4. Sorting Algorithms &mdash; Introduction to Computer Science in C# 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Introduction to Computer Science in C# 1.0 documentation" href="../index.html" />
    <link rel="up" title="10. Arrays" href="arrays.html" />
    <link rel="next" title="10.5. Binary Searching" href="binarysearching.html" />
    <link rel="prev" title="10.3. Linear Searching" href="searching.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">
  


  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          COMP 170</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../genindex.html">Index</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../context/context.html">1. Context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../context/motivation.html">1.1. Motivation for This Book</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context/intro.html">1.2. Resources Online</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context/download.html">1.3. Downloading and Reading Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context/computerscience.html">1.4. Computer Science, Broadly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context/reviewcontext.html">1.5. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data/data.html">2. C# Data and Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data/sampleprogram.html">2.1. A Sample C# Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/lab-edit-compile-run.html">2.2. Lab: Editing, Compiling, and Running with Xamarin Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/arithmetic.html">2.3. Arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/variables.html">2.4. Variables and Assignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/typography.html">2.5. Syntax Template Typography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/strings1.html">2.6. Strings, Part I</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/print1.html">2.7. Writing to the Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/programstructure.html">2.8. C# Program Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/io.html">2.9. Combining Input and Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/strings2.html">2.10. String Special Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/writeline-substitution.html">2.11. Substitutions in Console.WriteLine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/types-and-conversions.html">2.12. Value Types and Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/learning-to-problem-solve.html">2.13. Learning to Solve Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/lab-division-sentences.html">2.14. Lab: Division Sentences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data/reviewdataop.html">2.15. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions/functions.html">3. Defining Functions of your Own</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../functions/firstfunc.html">3.1. A First Function Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/multfunc.html">3.2. Multiple Function Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/funcparam.html">3.3. Function Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/funcparam2.html">3.4. Multiple Function Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/funcreturn.html">3.5. Returned Function Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/writerconsumer.html">3.6. Two Roles: Writer and Consumer of Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/localscope.html">3.7. Local Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/staticvariables.html">3.8. Static Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/notusereturn.html">3.9. Not using Return Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/libraryclass.html">3.10. Library Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/funcsummary.html">3.11. Static Function Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/reviewfunc.html">3.12. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basicstringops/basicstringops.html">4. Basic String Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basicstringops/stringindexing.html">4.1. String Indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basicstringops/stringmethods.html">4.2. Some Instance Methods and the Length Property</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basicstringops/problem-solving-replace.html">4.3. A Creative Problem Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basicstringops/lab-string-ops.html">4.4. Lab: String Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basicstringops/reviewstring.html">4.5. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../decisions/decisions.html">5. Decisions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../decisions/conditions.html">5.1. Conditions I</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/ifstatements.html">5.2. Simple <code class="docutils literal"><span class="pre">if</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/ifelse.html">5.3. <code class="docutils literal"><span class="pre">if</span></code>-<code class="docutils literal"><span class="pre">else</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/comparisonops.html">5.4. More Conditional Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/ifelsechained.html">5.5. Multiple Tests and <code class="docutils literal"><span class="pre">if</span></code>-<code class="docutils literal"><span class="pre">else</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/ifpitfalls.html">5.6. If-statement Pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/compoundconditions.html">5.7. Compound Boolean Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/ifnested.html">5.8. Nested <code class="docutils literal"><span class="pre">if</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../decisions/reviewdecisions.html">5.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../while/while.html">6. While Loops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../while/whilestatements.html">6.1. While-Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/while-with-sequence.html">6.2. While-Statements with Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/whileinteractive.html">6.3. Interactive <code class="docutils literal"><span class="pre">while</span></code> Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/condition-short-circuit.html">6.4. Short-Circuiting &amp;&amp; and ||</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/whileexamples.html">6.5. While Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/stringmethods2.html">6.6. More String Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/userinput.html">6.7. User Input: UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/gcdexamples.html">6.8. Greatest Common Divisor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/do-while.html">6.9. Do-While Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/lab-number-game.html">6.10. Number Guessing Game Lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../while/reviewwhile.html">6.11. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../foreach/foreach.html">7. Foreach Loops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../foreach/foreachintro.html">7.1. <code class="docutils literal"><span class="pre">foreach</span></code> Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foreach/foreachexamples.html">7.2. <code class="docutils literal"><span class="pre">foreach</span></code> Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../foreach/reviewforeach.html">7.3. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../for/for.html">8. For Loops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../for/forstatements.html">8.1. For-Statement Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../for/forexamples.html">8.2. Examples With <code class="docutils literal"><span class="pre">for</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../for/lab-nested-loops.html">8.3. Lab: Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../for/reviewfor.html">8.4. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../files/files.html">9. Files, Paths, and Directories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../files/fileabstraction.html">9.1. Files As Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/filewrite.html">9.2. Writing Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/fileread.html">9.3. Reading Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/paths.html">9.4. Path Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/dir-file.html">9.5. Directory Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/dir-file.html#file-class">9.6. File Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/cmdline-execution.html">9.7. Command Line Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/fio.html">9.8. FIO Helper Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/reviewfiles.html">9.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="arrays.html">10. Arrays</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="onedim.html">10.1. One Dimensional Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="music.html">10.2. Musical Scales and Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="searching.html">10.3. Linear Searching</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">10.4. Sorting Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="binarysearching.html">10.5. Binary Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-array1d.html">10.6. Lab: Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-searching-arrays-lists-maps.html">10.7. Lab: Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="twodim.html">10.8. Multi-dimensional Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewarrays.html">10.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lists/lists.html">11. Lists</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lists/listsyntax.html">11.1. List Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lists/dotnetapi.html">11.2. .Net Library (API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lists/reviewlists.html">11.3. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dictionaries/dictionaries.html">12. Dictionaries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dictionaries/dictionarysyntax.html">12.1. Dictionary Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionaries/dictionaryefficiency.html">12.2. Dictionary Efficiency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionaries/dictionaryexamples.html">12.3. Dictionary Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionaries/lab-filedata.html">12.4. Lab: File Data and Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dictionaries/reviewdictionaries.html">12.5. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../classes/classes.html">13. Classes and Object-Oriented Programming</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../classes/a-first-class.html">13.1. A First Example of Class Instances: Contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes/classexamples.html">13.2. Class Instance Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes/rational.html">13.3. The Rational Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes/planning_classes.html">13.4. Planning A Class Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes/classes-and-structs.html">13.5. Classes And Structs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes/overload-op.html">13.6. Defining Operators (Optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../classes/reviewclasses.html">13.7. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">14. Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#assertions">14.1. Assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#attributes">14.2. Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#testing-the-constructor">14.3. Testing the Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#testing-rational-comparisons">14.4. Testing Rational Comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#testing-rational-arithmetic">14.5. Testing Rational Arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#testing-rational-conversions-to-other-types">14.6. Testing Rational Conversions (to other types)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#testing-the-parsing-feature">14.7. Testing the Parsing Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/testing.html#running-the-nunit-tests">14.8. Running the NUnit Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/interfaces.html">15. Interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/fractions-revisited.html">15.1. Rationals Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/csproj-revisited.html">15.2. Csproject Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interfaces/reviewinterfaces.html">15.3. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../recursion/recursion.html">16. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/datastructures.html">17. Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix.html">18. Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/monotools.html">18.1. Development Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/xamarinstudio.html">18.2. Xamarin Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/cmdline.html">18.3. Command Line Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/precedence.html">18.4. Precedence of Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/homework-gradecalculation.html">18.5. Homework: Grade Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/homework-gradecalculation2.html">18.6. Homework: Grade Calculation from Individual Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/hw-gradefiles.html">18.7. Homework: Grade File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/hw-booklist.html">18.8. Homework: Book List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/project.html">18.9. Group Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/lab-versioncontrol.html">18.10. Lab: Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/hgteamwork.html">18.11. Mercurial and Teamwork</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix/acknowledgments.html">18.12. Acknowledgments</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">10.4. Sorting Algorithms</a><ul>
<li><a class="reference internal" href="#exchanging-array-elements">10.4.1. Exchanging Array Elements</a></li>
<li><a class="reference internal" href="#bubble-sort">10.4.2. Bubble Sort</a></li>
<li><a class="reference internal" href="#selection-sort">10.4.3. Selection Sort</a><ul>
<li><a class="reference internal" href="#shuffle-exercise">10.4.3.1. Shuffle Exercise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#insertion-sort">10.4.4. Insertion Sort</a></li>
<li><a class="reference internal" href="#shell-sort">10.4.5. Shell Sort</a></li>
<li><a class="reference internal" href="#quicksort-a-k-a-partition-sort">10.4.6. Quicksort a.k.a. Partition Sort</a></li>
<li><a class="reference internal" href="#random-data-generation">10.4.7. Random Data Generation</a></li>
<li><a class="reference internal" href="#timing">10.4.8. Timing</a></li>
<li><a class="reference internal" href="#running-the-code">10.4.9. Running the Code</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="searching.html" title="Previous Chapter: 10.3. Linear Searching">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </a>
  </li>
  <li>
    <a href="binarysearching.html" title="Next Chapter: 10.5. Binary Searching">
      <span class="glyphicon glyphicon-chevron-right"></span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/arrays/sorting.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="sorting-algorithms">
<span id="sorting"></span><span id="index-0"></span><h1>10.4. Sorting Algorithms<a class="headerlink" href="#sorting-algorithms" title="Permalink to this headline">¶</a></h1>
<p>Sorting algorithms represent foundational knowledge that every computer scientist and
IT professional should at least know at a basic level. And it turns out to be a great
way of learning about why arrays are important.</p>
<p>In this section, we&#8217;re going to take a look at a number of well-known sorting algorithms
with the hope of sensitizing you to the notion of <em>performance</em>&#8211;a topic that is covered
in greater detail in courses such as algorithms and data structures.</p>
<p>This is not intended to be a comprehensive reference at all. The idea is to learn how
these classic algorithms are coded in the teaching language for this course, C#, and to
understand the essentials of analyzing their performance, both theoretically and
experimentally. For a full theoretical treatment, we recommend the outstanding textbook
by Niklaus Wirth <a class="reference internal" href="#wirthadp" id="id1">[WirthADP]</a>, who invented the Pascal language. (We have also adapted
some examples from Thomas W. Christopher&#8217;s <a class="reference internal" href="#tcsortingjava" id="id2">[TCSortingJava]</a> animated sorting algorithms
page.</p>
<p>The sorts and supporting functions are all in
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/sorting/sorting.cs">sorting/sorting.cs</a>, but we start one bit at a time:</p>
<div class="section" id="exchanging-array-elements">
<span id="index-1"></span><h2>10.4.1. Exchanging Array Elements<a class="headerlink" href="#exchanging-array-elements" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll begin by introducing you to a simple method, whose only purpose in life is to
swap two data values at positions <code class="docutils literal"><span class="pre">m</span></code> and <code class="docutils literal"><span class="pre">n</span></code> in a given integer array:</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="c1">/// Exchange the elements of data at indices m and n.</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Exchange</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">temporary</span> <span class="p">=</span> <span class="n">data</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
         <span class="n">data</span> <span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="p">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
         <span class="n">data</span> <span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="p">=</span> <span class="n">temporary</span><span class="p">;</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>For example if we have an array nums, shown with indices:</p>
<div class="highlight-none"><div class="highlight"><pre> nums: -1  8 11 22  9 -5  2
index:  0  1  2  3  4  5  6
</pre></div>
</div>
<p>Then after <code class="docutils literal"><span class="pre">Exchange(nums,</span> <span class="pre">2,</span> <span class="pre">5)</span></code> the array would look like</p>
<div class="highlight-none"><div class="highlight"><pre> nums: -1  8 -5 22  9 11  2
index:  0  1  2  3  4  5  6
</pre></div>
</div>
<p>In general, swapping two values in an array is
no different than swapping any two integers.
Suppose we have the following integers <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">b</span></code>:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">t</span><span class="p">;</span>

<span class="n">a</span> <span class="p">=</span> <span class="m">25</span><span class="p">;</span>
<span class="n">b</span> <span class="p">=</span> <span class="m">35</span><span class="p">;</span>
<span class="n">t</span> <span class="p">=</span> <span class="n">a</span><span class="p">;</span>
<span class="n">a</span> <span class="p">=</span> <span class="n">b</span><span class="p">;</span>
<span class="n">b</span> <span class="p">=</span> <span class="n">t</span><span class="p">;</span>
</pre></div>
</div>
<p>After this code does its job, the value of <code class="docutils literal"><span class="pre">a</span></code> would be 35
and the value of <code class="docutils literal"><span class="pre">b</span></code> would be 25.</p>
<p>So in the <code class="docutils literal"><span class="pre">Exchange()</span></code> function above,
if we have two different array elements at positions <code class="docutils literal"><span class="pre">m</span></code> and <code class="docutils literal"><span class="pre">n</span></code>,
we are basically getting each value at these positions,
e.g. <code class="docutils literal"><span class="pre">data[m]</span></code> and <code class="docutils literal"><span class="pre">data[n]</span></code> and treating them
as if they were <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">b</span></code> in the above code.</p>
<p>You might find it helpful at this time to verify that
the above code does what we&#8217;re saying it does, and a
good way is to type it directly into the C# interpreter (csharp)
so you can see it for yourself.</p>
<p>The <code class="docutils literal"><span class="pre">Exchange()</span></code> function is vital to all of the sorting algorithms in the following way.
It is used whenever two items are found to be out of order.
When this occurs, they will be <em>swapped</em>. This doesn&#8217;t mean
that the item comes to its final resting place in the array.
It just means that for the moment, the items
have been reordered so we&#8217;ll get closer to having a sorted array.</p>
<p>Let&#8217;s now take a look at the various sorting algorithms.</p>
</div>
<div class="section" id="bubble-sort">
<span id="index-2"></span><h2>10.4.2. Bubble Sort<a class="headerlink" href="#bubble-sort" title="Permalink to this headline">¶</a></h2>
<p>The Bubble Sort algorithm works by repeatedly scanning
through the array exchanging adjacent elements that are out of order.  Watching
this work with a strategically-placed <code class="docutils literal"><span class="pre">Console.WriteLine()</span></code> in the outer
loop, you will see that the sorted array grows right to left. Each
sweep picks up the largest remaining element and moves to the right as
far as it can go. It is therefore not necessary to scan through the
entire array each sweep, but only to the beginning of the sorted
portion.</p>
<p>We define the number of <em>inversions</em> as the number of element pairs that
are out of order. They needn&#8217;t be adjacent. If <code class="docutils literal"><span class="pre">data[7]</span> <span class="pre">&gt;</span> <span class="pre">data[16]</span></code>,
that&#8217;s an inversion. Every time an inversion is required,
we also say that there is corresponding data <em>movement</em>. If you look at the
<code class="docutils literal"><span class="pre">Exchange()</span></code> code, you&#8217;ll observe that a swap requires three movements
to take place, which happens very quickly on most processors but still amounts
to a significant cost.</p>
<p>There can be at most <span class="math">\(N \cdot \frac{N-1}{2}\)</span> inversions in the
array of length <span class="math">\(N\)</span>. The maximum
number of inversions occurs when the array is sorted in reverse order
and has no equal elements.</p>
<p>Bubble Sort exchanges only adjacent elements.
Each such exchange removes precisely one inversion; therefore,
Bubble Sort requires <span class="math">\(O(N^2)\)</span> exchanges.</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayBubbleSort</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">N</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="p">=</span><span class="n">N</span><span class="p">-</span><span class="m">1</span><span class="p">;</span> <span class="n">j</span><span class="p">&gt;</span><span class="m">0</span><span class="p">;</span> <span class="n">j</span><span class="p">--)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">=</span><span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="p">&lt;</span><span class="n">j</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span> <span class="p">{</span>
               <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">&gt;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">])</span> <span class="p">{</span>
                  <span class="n">Exchange</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="p">+</span> <span class="m">1</span><span class="p">);</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="selection-sort">
<span id="index-3"></span><h2>10.4.3. Selection Sort<a class="headerlink" href="#selection-sort" title="Permalink to this headline">¶</a></h2>
<p>The Selection Sort algorithm works to minimize the amount of data movement,
hence the number of <code class="docutils literal"><span class="pre">Exchange()</span></code> calls.</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="c1">/// Among the indices &gt;= start for data,</span>
      <span class="c1">/// return the index of the minimal element.</span>
      <span class="k">public</span> <span class="k">static</span> <span class="kt">int</span> <span class="nf">IntArrayMin</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">start</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">N</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span> <span class="n">minPos</span> <span class="p">=</span> <span class="n">start</span><span class="p">;</span>
         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">pos</span><span class="p">=</span><span class="n">start</span><span class="p">+</span><span class="m">1</span><span class="p">;</span> <span class="n">pos</span> <span class="p">&lt;</span> <span class="n">N</span><span class="p">;</span> <span class="n">pos</span><span class="p">++)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="p">&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">minPos</span><span class="p">])</span> <span class="p">{</span>
               <span class="n">minPos</span> <span class="p">=</span> <span class="n">pos</span><span class="p">;</span>
            <span class="p">}</span>
         <span class="k">return</span> <span class="n">minPos</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArraySelectionSort</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">N</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">=</span><span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">N</span><span class="p">-</span><span class="m">1</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">k</span> <span class="p">=</span> <span class="n">IntArrayMin</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
               <span class="n">Exchange</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>It&#8217;s a remarkably simple algorithm to explain. As shown in the code, the
actual sorting is done by a function, <code class="docutils literal"><span class="pre">IntArraySelectionSort()</span></code>, which
takes an array of data as its only parameter, like Bubble sort.
The way Selection Sort works is as follows:</p>
<ol class="arabic simple">
<li>An outer loop visits each item in the array to find out whether it is the
minimum of all the elements after it.
If it is not the minimum, it is going to be swapped with whatever
item in the rest of the array is the minimum.</li>
<li>We use a helper function,
<code class="docutils literal"><span class="pre">IntArrayMin()</span></code>
to find the position of the minimum value in the rest of the array.
This function has a parameter, <code class="docutils literal"><span class="pre">start</span></code> to indicate where
we wish to begin the search.
So as you can see from the loop in <code class="docutils literal"><span class="pre">IntArraySelectionSort()</span></code>,
when we start with position <code class="docutils literal"><span class="pre">i</span></code>, and we compare to the later elements
from position <code class="docutils literal"><span class="pre">i</span> <span class="pre">+</span> <span class="pre">1</span></code> to the end of the array, updating the position of the
smallest element so far.</li>
</ol>
<p>An illustration to accompany the discussion:</p>
<div class="highlight-none"><div class="highlight"><pre> data: 12  8 -5 22  9  2
index:  0  1  2  3  4  5
        i     k
</pre></div>
</div>
<p>The first time through the loop, <code class="docutils literal"><span class="pre">i</span></code> is 0, and <code class="docutils literal"><span class="pre">k</span></code> gets the value 2, since data[2]
is -5, the smallest element.  Those two positions get swapped.</p>
<div class="highlight-none"><div class="highlight"><pre> data: -5  8 12 22  9  2
index:  0  1  2  3  4  5
</pre></div>
</div>
<p>The next
time through the loop i is 1 and k becomes 5:</p>
<div class="highlight-none"><div class="highlight"><pre> data: -5  8 12 22  9  2
index:  0  1  2  3  4  5
           i           k
</pre></div>
</div>
<p>After the swap:</p>
<div class="highlight-none"><div class="highlight"><pre> data: -5  2 12 22  9  8
index:  0  1  2  3  4  5
</pre></div>
</div>
<p>and so on.  Here is the data after each of the last three swaps:</p>
<div class="highlight-none"><div class="highlight"><pre>-5  2  8 22  9 12

-5  2  8  9 22 12

-5  2  8  9 12 22
</pre></div>
</div>
<p>Consider the first call to <code class="docutils literal"><span class="pre">IntArrayMin</span></code>.</p>
<div class="highlight-none"><div class="highlight"><pre> data: 12  8 -5 22  9  2
index:  0  1  2  3  4  5
</pre></div>
</div>
<p>Initially <code class="docutils literal"><span class="pre">minPos</span></code> is 0.  Here are the
changes for each value of <code class="docutils literal"><span class="pre">pos</span></code>:</p>
<div class="highlight-none"><div class="highlight"><pre>pos=1:  8 = data[1] &lt; data[0] = 12, so minPos becomes 1
pos=2: -5 = data[2] &lt; data[1] = 8, so minPos becomes 2
pos=3: 22 = data[3] is not &lt; data[2] = -5, so minPos still 2
pos=4:  9 = data[4] is not &lt; data[2] = -5, so minPos still 2
pos=5:  2 = data[5] is not &lt; data[2] = -5, so minPos still 2
</pre></div>
</div>
<p>and 2 gets returned, and we ge the swap</p>
<div class="highlight-none"><div class="highlight"><pre> data: -5  8 12 22  9  2
index:  0  1  2  3  4  5
</pre></div>
</div>
<p>The next call to <code class="docutils literal"><span class="pre">IntArrayMin</span></code> has <code class="docutils literal"><span class="pre">start</span></code> as 1, so <code class="docutils literal"><span class="pre">minPos</span></code> is initially 1,
and we compare to the elements of data at index 2, 3, 4, and 5....</p>
<p>We won&#8217;t do the full algorithmic analysis here. Selection Sort is interesting because
it does most of its work through <em>comparisons</em>, with the same number of them no matter
how the data are ordered, exactly
<span class="math">\(N \cdot \frac{N-1}{2}\)</span>, which is
<span class="math">\(O(N^2)\)</span> The
number of <em>exchanges</em> is O(N). The comparisons are a non-trivial cost,
however, and do show
in our own performance experiments with randomly-generated data.</p>
<div class="section" id="shuffle-exercise">
<span id="index-4"></span><h3>10.4.3.1. Shuffle Exercise<a class="headerlink" href="#shuffle-exercise" title="Permalink to this headline">¶</a></h3>
<p>Complete the <code class="docutils literal"><span class="pre">Shuffle</span></code> function and add a <code class="docutils literal"><span class="pre">Main</span></code> method to test it:</p>
<div class="highlight-csharp"><div class="highlight"><pre><span class="c1">/// Shuffle the elements of an array into random positions,</span>
<span class="c1">/// changing the array.  An array containing</span>
<span class="c1">/// 2, 5, 7, 7, 7, 9 *might* end up in the order</span>
<span class="c1">/// 7, 7, 2, 9, 7, 5.</span>
<span class="k">static</span> <span class="k">void</span> <span class="nf">Shuffle</span><span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>Use a Random and do something close to a reverse of selection sort, using
<code class="docutils literal"><span class="pre">Exchange</span></code> with a random position.</p>
</div>
</div>
<div class="section" id="insertion-sort">
<span id="index-5"></span><h2>10.4.4. Insertion Sort<a class="headerlink" href="#insertion-sort" title="Permalink to this headline">¶</a></h2>
<p>In the Insertion Sort algorithm, we build up a longer and longer sorted
list from the bottom of the array. We repeatedly insert the next element
into the sorted part of the array by sliding it down (using our familiar
<code class="docutils literal"><span class="pre">Exchange()</span></code> method) to its proper position.</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayInsertionSort</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">N</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="p">=</span><span class="m">1</span><span class="p">;</span> <span class="n">j</span><span class="p">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">=</span><span class="n">j</span><span class="p">;</span> <span class="n">i</span><span class="p">&gt;</span><span class="m">0</span> <span class="p">&amp;&amp;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">-</span><span class="m">1</span><span class="p">];</span> <span class="n">i</span><span class="p">--)</span> <span class="p">{</span>
               <span class="n">Exchange</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Consider the earlier example array as we illustrate some of the steps.
I use the symbol &#8216;-&#8216; for an element that we know to
be in the sorted list at the beginning of the array,
and &#8216;&#64;&#8217; over the next one we are trying to insert <em>at</em> the right position.
We start with a one-element sorted list and try to position the second element:</p>
<div class="highlight-none"><div class="highlight"><pre>        -  @
 data: 12  8 -5 22  9  2
index:  0  1  2  3  4  5
</pre></div>
</div>
<p>After each outer loop in sequence we end up with:</p>
<div class="highlight-none"><div class="highlight"><pre>        -  -  @
 data:  8 12 -5 22  9  2
index:  0  1  2  3  4  5

        -  -  -  @
 data: -5  8 12 22  9  2
index:  0  1  2  3  4  5

        -  -  -  -  @
 data: -5  8 12 22  9  2
index:  0  1  2  3  4  5

        -  -  -  -  -  @
 data: -5  8  9 12 22  2
index:  0  1  2  3  4  5

        -  -  -  -  -  -
 data: -5  2  8  9 12 22
index:  0  1  2  3  4  5
</pre></div>
</div>
<p>Let us illustrate several times just through the inner loop, the first time,
when the 8 is moved into
position from index <code class="docutils literal"><span class="pre">j</span></code> = 1, so <code class="docutils literal"><span class="pre">i</span></code> starts at 1.  We show the letter i
over the data at index <code class="docutils literal"><span class="pre">i</span></code>, and show the comparison test to be done with a <cite>&gt;</cite>
with a &#8216;?&#8217; over it.</p>
<div class="highlight-none"><div class="highlight"><pre>          ? i
 data: 12 &gt; 8  -5  22   9   2   1&gt;0 and 12&gt;8: true, so swap, loop
index:  0   1   2   3   4   5

        i
 data:  8  12  -5  22   9   2   0&gt;0 false, skip comparison of data, end loop
index:  0   1   2   3   4   5
</pre></div>
</div>
<p>Let us also illustrate at a later time through the inner loop, when the 9 is moved into
position from index <code class="docutils literal"><span class="pre">j</span></code> = 4, so <code class="docutils literal"><span class="pre">i</span></code> starts at 4.</p>
<div class="highlight-none"><div class="highlight"><pre>                      ? i
 data: -5   8  12  22 &gt; 9   2  4&gt;0 and 22&gt;9: true, so swap, loop
index:  0   1   2   3   4   5

                  ? i
 data: -5   8  12 &gt; 9  22   2  3&gt;0 and 12&gt;9: true, so swap, loop
index:  0   1   2   3   4   5

              ? i
 data: -5   8 &gt; 9  12  22   2  2&gt;0 and 8&gt;9: false, end inner loop
index:  0   1   2   3   4   5
</pre></div>
</div>
<p>The 9 started at index <code class="docutils literal"><span class="pre">j</span></code> = 4, and now the list is sorted up through index 4.</p>
<p>This will require as many exchanges as Bubble Sort,
since only one inversion is removed per exchange. So Insertion Sort also
requires <span class="math">\(O(N^2)\)</span> exchanges. On average Insertion Sort requires
only half as many comparisons as Bubble Sort, since the average distance an
element must move for random input is one-half the length of the sorted
portion.</p>
</div>
<div class="section" id="shell-sort">
<span id="index-6"></span><h2>10.4.5. Shell Sort<a class="headerlink" href="#shell-sort" title="Permalink to this headline">¶</a></h2>
<p>Shell Sort is basically a trick to make Insertion Sort run faster. If
you take a quick glance at the code and look beyond the presence of
two additional <em>outer loops</em>, you&#8217;ll notice that the code looks very similar.</p>
<p>Since Insertion Sort removes one inversion per exchange, it cannot run
faster than the number of inversions in the data, which in worst case is
<span class="math">\(O(N^2)\)</span>. Of course, it can&#8217;t run faster than N, either, because
it must look at each element, whether or not the element is out of
position. We can&#8217;t do any thing about the lower bound O(N), but we can
do something about the number of steps to remove inversions.</p>
<p>The trick in Shell Sort is to start off swapping elements that are
further apart.  While this may remove only one inversion sometimes,
often many more inversions are removed with intervening elements.
Shell Sort considers the subsequences of elements spaced k
elements apart. There are k such sequences starting at positions 0
through k-1 in the array. In these sorts, elements k positions apart are
exchanged, removing between 1 and 2(k-1)+1 inversions.</p>
<p>Swapping elements far apart is not sufficient, generally, so
a Shell Sort will do several
passes with decreasing values of k, ending with k=1.
The following examples experiment
with different series of values of k.</p>
<p>In this first example, we sort all subsequences of elements 8 apart,
then 4, 2, and 1. Please note that these intervals are to show how the
method works&#8211;not how the method works <em>best</em>.</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="c1">/// Shell sort of data using specified swapping intervals.</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayShellSort</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span><span class="p">[]</span> <span class="n">intervals</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">N</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
         <span class="c1">// The intervals for the shell sort must be sorted, ascending</span>
         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">=</span><span class="n">intervals</span><span class="p">.</span><span class="n">Length</span><span class="p">-</span><span class="m">1</span><span class="p">;</span> <span class="n">k</span><span class="p">&gt;=</span><span class="m">0</span><span class="p">;</span> <span class="n">k</span><span class="p">--)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">interval</span> <span class="p">=</span> <span class="n">intervals</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">m</span><span class="p">=</span><span class="m">0</span><span class="p">;</span> <span class="n">m</span><span class="p">&lt;</span><span class="n">interval</span><span class="p">;</span> <span class="n">m</span><span class="p">++)</span> <span class="p">{</span>
               <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="p">=</span><span class="n">m</span><span class="p">+</span><span class="n">interval</span><span class="p">;</span> <span class="n">j</span><span class="p">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">j</span><span class="p">+=</span><span class="n">interval</span><span class="p">)</span> <span class="p">{</span>
                  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">=</span><span class="n">j</span><span class="p">;</span> <span class="n">i</span><span class="p">&gt;=</span><span class="n">interval</span> <span class="p">&amp;&amp;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]&lt;</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">-</span><span class="n">interval</span><span class="p">];</span>
                        <span class="n">i</span><span class="p">-=</span><span class="n">interval</span><span class="p">)</span> <span class="p">{</span>
                     <span class="n">Exchange</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="p">-</span> <span class="n">interval</span><span class="p">);</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayShellSortNaive</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span><span class="p">[]</span> <span class="n">intervals</span> <span class="p">=</span> <span class="p">{</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">8</span> <span class="p">};</span>
         <span class="n">IntArrayShellSort</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">intervals</span><span class="p">);</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>In general, shell sort with sequences of jump sizes that
are powers of one another doesn&#8217;t
do as well as one where most jump sizes are not multiples of others,
mixing up the data more.
In  addition, the number of intervals must be increased as the size of the array to
be sorted increases, which explains why we allow an <em>arbitrary</em> array of intervals
to be specified.</p>
<p>Without too much explanation, we show how you can choose the intervals differently
in an <em>improved</em> shell sort, where the intervals have been chosen so as not to be
multiples of one another.</p>
<p>Donald Knuth has suggested a couple of methods for computing the intervals:</p>
<div class="math">
\[h_0 = 1\]\[h_{k+1} = 3 h_k + 1\]\[t = \lfloor log_3 n \rfloor - 1\]</div>
<p>Here we are using notation for the <em>floor</em> function
<span class="math">\(\lfloor x \rfloor\)</span> means the largest integer <span class="math">\(\le x\)</span>.</p>
<p>This results in a sequence 1, 4, 13, 40, 121.... You stop computing values in the
sequence when <span class="math">\(t = log_3 n - 1\)</span>. (So for n=50,000, you should have about 9-10
intervals.)</p>
<p>For completeness, we note that <span class="math">\(log_3 n\)</span> must be sufficiently large (and &gt; 2)
for this method to work. Our code ensures this by taking the <em>maximum</em> of
<span class="math">\(log_3 n\)</span> and 1.</p>
<p>Knuth also suggests:</p>
<div class="math">
\[h_0 = 1\]\[h_{k+1} = 2 h_k + 1\]\[t = \lfloor log_2 n \rfloor - 1\]</div>
<p>This results in a sequence 1, 3, 7, 15, 31....</p>
<p>Here is the improvement to our naive method that dynamically calculates
the intervals based on the first suggestion of Knuth:</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="c1">/// Generates the intervals for Shell sort on a</span>
      <span class="c1">/// list of length n via an algorithm from Knuth.</span>
      <span class="k">static</span> <span class="kt">int</span><span class="p">[]</span> <span class="nf">GenerateIntervals</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="p">&lt;</span> <span class="m">2</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// no sorting will be needed</span>
            <span class="k">return</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
         <span class="p">}</span>
         <span class="kt">int</span> <span class="n">t</span> <span class="p">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">Max</span> <span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Log</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
         <span class="kt">int</span><span class="p">[]</span> <span class="n">intervals</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">t</span><span class="p">];</span>
         <span class="n">intervals</span> <span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">=</span><span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">t</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="n">intervals</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="m">3</span> <span class="p">*</span> <span class="n">intervals</span> <span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">]</span> <span class="p">+</span> <span class="m">1</span><span class="p">;</span>
         <span class="k">return</span> <span class="n">intervals</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayShellSortBetter</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span><span class="p">[]</span> <span class="n">intervals</span> <span class="p">=</span> <span class="n">GenerateIntervals</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
         <span class="n">IntArrayShellSort</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">intervals</span><span class="p">);</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Shell sort is a complex sorting algorithm to make &#8220;work well&#8221;, which is why it is not
seen often in practice. It is, however, making a bit of a comeback in embedded systems.</p>
<p>We nevertheless think it is a very cool algorithm to have heard of as a computer science
student and think it has promise in a number of situations, especially in systems where
there are limits on available memory (e.g. embedded systems).</p>
</div>
<div class="section" id="quicksort-a-k-a-partition-sort">
<span id="index-7"></span><h2>10.4.6. Quicksort a.k.a. Partition Sort<a class="headerlink" href="#quicksort-a-k-a-partition-sort" title="Permalink to this headline">¶</a></h2>
<p>This sort is a more advanced example that uses <em>recursion</em>. We list it because it
is one of the best sorts for <em>random</em> data, having an <em>average</em> time behavior of
<span class="math">\(O(N  \log N)\)</span>.
Quicksort is a rather interesting case. While it has an excellent average
behavior, it has a worst case performance of <span class="math">\(O(N ^2)\)</span>.</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="c1">/// Sort elements of data in index range [lowI, highI].</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayQuickSort</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">,</span>
                                            <span class="kt">int</span> <span class="n">lowI</span><span class="p">,</span> <span class="kt">int</span> <span class="n">highI</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kt">int</span> <span class="n">afterSmall</span> <span class="p">=</span> <span class="n">lowI</span><span class="p">,</span> <span class="n">beforeBig</span> <span class="p">=</span> <span class="n">highI</span><span class="p">;</span>
         <span class="kt">int</span> <span class="n">pivot</span> <span class="p">=</span> <span class="n">data</span><span class="p">[(</span><span class="n">lowI</span> <span class="p">+</span> <span class="n">highI</span><span class="p">)</span> <span class="p">/</span> <span class="m">2</span><span class="p">];</span>
         <span class="c1">// in loop data[i] &lt;= pivot if i &lt; afterSmall</span>
         <span class="c1">//         data[i] &gt;= pivot if i &gt; beforeBig</span>
         <span class="c1">//         region with aftersmall &lt;= i &lt;= beforeBig</span>
         <span class="c1">//             shrinks to nothing.</span>
         <span class="k">while</span> <span class="p">(</span><span class="n">afterSmall</span> <span class="p">&lt;=</span> <span class="n">beforeBig</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">afterSmall</span><span class="p">]</span> <span class="p">&lt;</span> <span class="n">pivot</span><span class="p">)</span>
               <span class="n">afterSmall</span><span class="p">++;</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">pivot</span> <span class="p">&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">beforeBig</span><span class="p">])</span>
               <span class="n">beforeBig</span><span class="p">--;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">afterSmall</span> <span class="p">&lt;=</span> <span class="n">beforeBig</span><span class="p">)</span> <span class="p">{</span>
               <span class="n">Exchange</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">afterSmall</span><span class="p">,</span> <span class="n">beforeBig</span><span class="p">);</span>
               <span class="n">afterSmall</span><span class="p">++;</span>
               <span class="n">beforeBig</span><span class="p">--;</span>
            <span class="p">}</span>
         <span class="p">}</span>  <span class="c1">// after loop: beforeBig &lt; afterSmall, and</span>
         <span class="c1">//      data[i] &lt;= pivot for i &lt;= beforeBig,</span>
         <span class="c1">//      data[i] == pivot for i if beforeBig &lt; i &lt; afterSmall,</span>
         <span class="c1">//      data[i] &gt;= pivot for i &gt;= afterSmall.</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">lowI</span> <span class="p">&lt;</span> <span class="n">beforeBig</span><span class="p">)</span> <span class="c1">// at least two elements</span>
            <span class="n">IntArrayQuickSort</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">lowI</span><span class="p">,</span> <span class="n">beforeBig</span><span class="p">);</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">afterSmall</span> <span class="p">&lt;</span> <span class="n">highI</span><span class="p">)</span> <span class="c1">// at least two elements</span>
            <span class="n">IntArrayQuickSort</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">afterSmall</span><span class="p">,</span> <span class="n">highI</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayQuickSort</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">Length</span> <span class="p">&gt;</span> <span class="m">1</span><span class="p">)</span>
            <span class="n">IntArrayQuickSort</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Though the initial call is to sort an entire array, this is accomplished by
dealing with sections, so the main work is done in the version with the
two extra parameters, giving the lowest and highest index considered.</p>
<p>It picks an arbitrary element as <em>pivot</em>, and then swaps
elements with values above and below the pivot until the part of the array
being processed is in three sections:</p>
<ol class="arabic simple">
<li>elements &lt;= pivot;</li>
<li>possibly an element equal to pivot</li>
<li>elements &gt;= pivot.</li>
</ol>
<p>Though sections 1 and 3 are not sorted, there are no inversions <em>between</em> any two
separate sections, so only the smaller sections 1 and 3 need to be sorted <em>separately</em>,
and only then if they have at least two elements.  They can be sorted
by calling the <em>same</em> function,
but with a smaller range of indices to deal with in each case.
These <em>recursive</em> calls stop when a part is reduced to one element.</p>
<p id="index-8">Another optional glimpse at an advanced topic:  The outer <code class="docutils literal"><span class="pre">while</span></code> loop
in lines 11-20 has fairly complicated logic.  To prove it is correct
overall, you can state and prove the simpler <em>loop invariant</em> expressed
in the comments above the loop, lines 7-10.  This allows the conclusion
after the loop in comment lines 21-24.</p>
</div>
<div class="section" id="random-data-generation">
<span id="index-9"></span><h2>10.4.7. Random Data Generation<a class="headerlink" href="#random-data-generation" title="Permalink to this headline">¶</a></h2>
<p>Now it is time to talk about how we are going to check the performance in
a real-world situation. We&#8217;re going to start by modeling the situation when
the data are in random order.</p>
<p>The following code generates a random array:</p>
<div class="highlight-csharp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre>      <span class="c1">/// Fill data with pseudo-random data seeded by randomSeed.</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IntArrayGenerate</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">randomSeed</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">Random</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Random</span> <span class="p">(</span><span class="n">randomSeed</span><span class="p">);</span>
         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">=</span><span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">data</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="n">data</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">r</span><span class="p">.</span><span class="n">Next</span> <span class="p">();</span>
      <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>There are a few things to note in this code:</p>
<ol class="arabic simple">
<li>We use the random number generator option to include a <em>seed</em>. Random numbers
aren&#8217;t truly random. The particular sequence is just determined by a seed.
The simplest way to create a Random object uses a seed taken from the system clock.</li>
<li>In order to regenerate a particular example, we actually need the random sequence to be
consistent, so we know that each of the sorting algorithms is being tested
using the same random data.</li>
<li>Because the sorting algorithms <em>modify</em> the data that are passed to it, we
need to have a way of regenerating the sequence for the next test.
Hence we specify the same seed each time.
(We could also copy the data, but it is kind of a waste of memory.)</li>
</ol>
<p>This completes the discussion of the <code class="docutils literal"><span class="pre">Sorting</span></code> class in
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/sorting/sorting.cs">sorting/sorting.cs</a>.</p>
</div>
<div class="section" id="timing">
<span id="index-10"></span><h2>10.4.8. Timing<a class="headerlink" href="#timing" title="Permalink to this headline">¶</a></h2>
<p>Separate from the basic sorts is the idea of checking their performance.
The rest of the code is in the driver class in
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/sorting/sorting_demo.cs">sorting/sorting_demo.cs</a>.</p>
<p>We need the ability to time the various sorting algorithms. Luckily, the
.Net framework/library gives us a
way of doing so through its <code class="docutils literal"><span class="pre">Stopwatch</span></code> class. This class supports methods that you
would expect if you&#8217;ve ever used a stopwatch (the kind found in sports):</p>
<ul class="simple">
<li>Reset: Resets the elapsed time to zero. We need this so we can use the same Stopwatch
for each sorting algorithm.</li>
<li>Start: Starts the stopwatch. Will keep recording time until stopped.</li>
<li>Stop: Stops the stopwatch.</li>
<li>ElapsedMilliseconds: Not really a method but a property (like a variable). We&#8217;ll use this to
get the total time that has elapsed between pairs of Start/Stop events in milliseconds.</li>
</ul>
<p>So let&#8217;s take a look at the <code class="docutils literal"><span class="pre">Main()</span></code>
method&#8217;s code to see how we compare the sorting algorithms.
The <code class="docutils literal"><span class="pre">Main()</span></code> method should be thought of as an <em>experiment</em> that tests the performance
of each of the sorting algorithms.
As all of the tests follow the same pattern,
we&#8217;re going to look at the basic variable setup first, and then one test.</p>
<div class="highlight-csharp"><div class="highlight"><pre>         <span class="kt">int</span> <span class="n">arraySize</span><span class="p">;</span>
         <span class="kt">int</span> <span class="n">randomSeed</span><span class="p">;</span>
         <span class="n">Stopwatch</span> <span class="n">watch</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Stopwatch</span> <span class="p">();</span>
         <span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">;</span>
</pre></div>
</div>
<p>The variables declared here are to set up the apparatus:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">arraySize</span></code>: The size of the array where we wish to test the performance. We will
use this to create an array with <code class="docutils literal"><span class="pre">arraySize</span></code> random values.</li>
<li><code class="docutils literal"><span class="pre">randomSeed</span></code>: This allows the user to vary the seed that is used to create
the random array. We often want to do this to determine whether our performance
results are stable when run a large number of times with different distributions.
We won&#8217;t go into too much detail here but consider it an important part of building
good performance benchmarks.</li>
<li><code class="docutils literal"><span class="pre">watch</span></code>: The stopwatch object we&#8217;re using to do the timings of all experiments.</li>
<li><code class="docutils literal"><span class="pre">data</span></code>:  The array to be sorted.</li>
</ul>
<div class="highlight-csharp"><div class="highlight"><pre>         <span class="k">if</span> <span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">Length</span> <span class="p">&lt;</span> <span class="m">2</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">arraySize</span> <span class="p">=</span> <span class="n">UI</span><span class="p">.</span><span class="n">PromptInt</span><span class="p">(</span><span class="s">&quot;Please enter desired array size: &quot;</span><span class="p">);</span>
            <span class="n">randomSeed</span> <span class="p">=</span> <span class="n">UI</span><span class="p">.</span><span class="n">PromptInt</span><span class="p">(</span>
                            <span class="s">&quot;Please enter an initial random seed value: &quot;</span><span class="p">);</span>
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">arraySize</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span> <span class="p">(</span><span class="n">args</span> <span class="p">[</span><span class="m">0</span><span class="p">]);</span>
            <span class="n">randomSeed</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span> <span class="p">(</span><span class="n">args</span> <span class="p">[</span><span class="m">1</span><span class="p">]);</span>
         <span class="p">}</span>
         <span class="n">data</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">arraySize</span><span class="p">];</span>
</pre></div>
</div>
<p>This code is designed so we can accept the parameters <code class="docutils literal"><span class="pre">arraySize</span></code> and <code class="docutils literal"><span class="pre">randomSeed</span></code>
from the command line or by prompting the user. When programmers design benchmarks, they
often try to make it possible to run them with minimal user interaction. For the purposes
of teaching, we wanted to make it possible to run it with or without command-line parameters.</p>
<div class="highlight-csharp"><div class="highlight"><pre>         <span class="n">TimeSetup</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">randomSeed</span><span class="p">,</span> <span class="n">watch</span><span class="p">);</span>
         <span class="n">Sorting</span><span class="p">.</span><span class="n">IntArrayQuickSort</span><span class="p">(</span><span class="n">data</span><span class="p">);</span> <span class="c1">//this line varies by experiment</span>
         <span class="n">TimeResult</span><span class="p">(</span><span class="s">&quot;Quick Sort&quot;</span><span class="p">,</span> <span class="n">watch</span><span class="p">);</span>
</pre></div>
</div>
<p>This code fragment is one of the tests in <code class="docutils literal"><span class="pre">Main</span></code>.  All of the tests set up
for timing first, run the desired sorting algorithm (bubble sort in this case),
and report the timing results.  Since the timing setup and reporting is
always done the same way, they actions are placed in helping methods:</p>
<div class="highlight-csharp"><div class="highlight"><pre>      <span class="c1">/// Set up data and watch for sort timing</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">TimeSetup</span> <span class="p">(</span><span class="kt">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">,</span> <span class="kt">int</span> <span class="n">randomSeed</span><span class="p">,</span>
                                    <span class="n">Stopwatch</span> <span class="n">watch</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">Sorting</span><span class="p">.</span><span class="n">IntArrayGenerate</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">randomSeed</span><span class="p">);</span>
         <span class="n">watch</span><span class="p">.</span><span class="n">Reset</span><span class="p">();</span>
         <span class="n">watch</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="c1">/// Report sort timing results from watch</span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">TimeResult</span> <span class="p">(</span><span class="kt">string</span> <span class="n">sortType</span><span class="p">,</span> <span class="n">Stopwatch</span> <span class="n">watch</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="n">watch</span><span class="p">.</span><span class="n">Stop</span> <span class="p">();</span>
         <span class="kt">double</span> <span class="n">elapsedTime</span> <span class="p">=</span> <span class="n">watch</span><span class="p">.</span><span class="n">ElapsedMilliseconds</span><span class="p">/</span><span class="m">1000.0</span><span class="p">;</span>
         <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span> <span class="p">(</span><span class="n">sortType</span> <span class="p">+</span> <span class="s">&quot;: {0:F3}&quot;</span><span class="p">,</span> <span class="n">elapsedTime</span><span class="p">);</span>
      <span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">TimeSetup</span></code>:</p>
<ol class="arabic simple">
<li>Creates the &#8216;random&#8217; array of <code class="docutils literal"><span class="pre">data</span></code>, based on <code class="docutils literal"><span class="pre">randomSeed</span></code>.</li>
<li>Resets the <code class="docutils literal"><span class="pre">Stopwatch</span></code> object to zero.</li>
<li>Starts the <code class="docutils literal"><span class="pre">Stopwatch</span></code>.</li>
</ol>
<p>After the sort, <code class="docutils literal"><span class="pre">TimeResult</span></code>:</p>
<ol class="arabic simple">
<li>Stops the <code class="docutils literal"><span class="pre">Stopwatch</span></code> and get the elapsed time (<code class="docutils literal"><span class="pre">watch.ElapsedMilliseconds</span></code>).
The value
is an integer (long) number of
milliseconds (thousandths of a second).</li>
<li>Prints the performance results in seconds.</li>
</ol>
<p>You can see all of the tests in <a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/sorting/sorting_demo.cs">sorting/sorting_demo.cs</a>.</p>
</div>
<div class="section" id="running-the-code">
<h2>10.4.9. Running the Code<a class="headerlink" href="#running-the-code" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s the output of a trial run on one of our computers. The results will vary
depending on your computer&#8217;s CPU, among other factors.</p>
<div class="highlight-none"><div class="highlight"><pre>bin/Debug$ mono Sorting.exe 1000 12
Quick Sort: 0.000
Naive Shell Sort: 0.000
Better Shell Sort: 0.000
Insertion Sort: 0.001
Selection Sort: 0.002
Bubble Sort: 0.003
bin/Debug$ mono Sorting.exe 1000 55
Quick Sort: 0.000
Naive Shell Sort: 0.000
Better Shell Sort: 0.000
Insertion Sort: 0.001
Selection Sort: 0.002
Bubble Sort: 0.003
bin/Debug$ mono Sorting.exe 10000 2
Quick Sort: 0.001
Naive Shell Sort: 0.019
Better Shell Sort: 0.002
Insertion Sort: 0.134
Selection Sort: 0.174
Bubble Sort: 0.321
bin/Debug$ mono Sorting.exe 50000 2
Quick Sort: 0.006
Naive Shell Sort: 0.441
Better Shell Sort: 0.015
Insertion Sort: 3.239
Selection Sort: 4.172
Bubble Sort: 8.028
bin/Debug$ mono Sorting.exe 100000 2
Quick Sort: 0.014
Naive Shell Sort: 1.794
Better Shell Sort: 0.034
Insertion Sort: 13.158
Selection Sort: 16.736
Bubble Sort: 31.334
</pre></div>
</div>
<p>At least based on randomly-generated arrays, the performance can be summarized
as follows:</p>
<ul class="simple">
<li>Bubble Sort is rather unimpressive as expected. In fact, this algorithm is never
used in practice but is of historical interest. Like the brute-force style of
searching, it does way too much work to come up with the right answer!</li>
<li>Selection Sort and Insertion Sort are also rather unimpressive on their own. Even though
Selection Sort can in theory do a lot less data movement, it must make a large
number of comparisons to find the minimum value to be moved. Again it is way too much work.
Insertion Sort, while unimpressive, fares a bit better and turns out to be a
nice building block (if modified) for the Shell Sort. Varying the interval size
drastically reduces the amount of data movement (and the distance it has to move).</li>
<li>Shell Sort does rather well, especially when we pick the right intervals.
In practice, the intervals also need to be adjusted based on the size of the
array, which is what we do as larger array sizes are considered. This is no trivial
task but a great deal of work has already been done in the past to determine
functions that generate good intervals.</li>
<li>The Quicksort is generally fastest on random data.  It is by far the
most commonly used sorting algorithm. Yet there are signs that Shell sort
is making a comeback in embedded systems, because it concise to code
and is still quite fast.  See
<a class="reference internal" href="#wikipediashellsort" id="id3">[WikipediaShellSort]</a>, where it is mentioned that
the <a class="reference internal" href="#uclibc" id="id4">[uClibc]</a> library makes use of Shell sort in its <code class="docutils literal"><span class="pre">qsort()</span></code> implementation,
rather than implementing the library sort with the more common quicksort.</li>
</ul>
<table class="docutils citation" frame="void" id="wirthadp" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[WirthADP]</a></td><td>Niklaus Wirth, Algorithms + Data Structures = Programs, Prentice Hall, 1976.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wikipediashellsort" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[WikipediaShellSort]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Shellsort">http://en.wikipedia.org/wiki/Shellsort</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="uclibc" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[uClibc]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/UClibc">http://en.wikipedia.org/wiki/UClibc</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="tcsortingjava" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[TCSortingJava]</a></td><td><a class="reference external" href="http://tools-of-computing.com/tc/CS/Sorts/SortAlgorithms.htm">http://tools-of-computing.com/tc/CS/Sorts/SortAlgorithms.htm</a></td></tr>
</tbody>
</table>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Andrew N. Harrington and George Thiruvathukal.<br/>
      Last updated on 26-July-2015 03:31:03.<br/>
    </p>
  </div>
</footer>
  </body>
</html>