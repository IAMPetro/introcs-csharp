<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>13.6. Defining Operators (Optional) &mdash; Introduction to Computer Science in C# 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Introduction to Computer Science in C# 1.0 documentation" href="index.html" />
    <link rel="up" title="13. Classes and Object-Oriented Programming" href="classes.html" />
    <link rel="next" title="13.7. Chapter Review Questions" href="reviewclasses.html" />
    <link rel="prev" title="13.5. Classes And Structs" href="classes-and-structs.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">
  


  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          COMP 170</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="genindex.html">Index</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="context.html">1. Context</a><ul>
<li class="toctree-l2"><a class="reference internal" href="motivation.html">1.1. Motivation for This Book</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html">1.2. Resources Online</a></li>
<li class="toctree-l2"><a class="reference internal" href="download.html">1.3. Downloading Text, Source Code, and Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="computerscience.html">1.4. Computer Science, Broadly</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewcontext.html">1.5. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data.html">2. C# Data and Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sampleprogram.html">2.1. A Sample C# Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-edit-compile-run.html">2.2. Lab: Editing, Compiling, and Running with Xamarin Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="arithmetic.html">2.3. Arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">2.4. Variables and Assignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="typography.html">2.5. Syntax Template Typography</a></li>
<li class="toctree-l2"><a class="reference internal" href="strings1.html">2.6. Strings, Part I</a></li>
<li class="toctree-l2"><a class="reference internal" href="print1.html">2.7. Writing to the Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="programstructure.html">2.8. C# Program Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="io.html">2.9. Combining Input and Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="strings2.html">2.10. String Special Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="writeline-substitution.html">2.11. Substitutions in Console.WriteLine</a></li>
<li class="toctree-l2"><a class="reference internal" href="types-and-conversions.html">2.12. Value Types and Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="learning-to-problem-solve.html">2.13. Learning to Solve Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-division-sentences.html">2.14. Lab: Division Sentences</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewdataop.html">2.15. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">3. Defining Functions of your Own</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firstfunc.html">3.1. A First Function Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="multfunc.html">3.2. Multiple Function Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="funcparam.html">3.3. Function Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="funcparam2.html">3.4. Multiple Function Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="funcreturn.html">3.5. Returned Function Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="writerconsumer.html">3.6. Two Roles: Writer and Consumer of Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="localscope.html">3.7. Local Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="staticvariables.html">3.8. Static Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="notusereturn.html">3.9. Not using Return Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="libraryclass.html">3.10. Library Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="funcsummary.html">3.11. Static Function Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewfunc.html">3.12. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="basicstringops.html">4. Basic String Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stringindexing.html">4.1. String Indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="stringmethods.html">4.2. Some Instance Methods and the Length Property</a></li>
<li class="toctree-l2"><a class="reference internal" href="problem-solving-replace.html">4.3. A Creative Problem Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-string-ops.html">4.4. Lab: String Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewstring.html">4.5. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="decisions.html">5. Decisions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="conditions.html">5.1. Conditions I</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifstatements.html">5.2. Simple <code class="docutils literal"><span class="pre">if</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifelse.html">5.3. <code class="docutils literal"><span class="pre">if</span></code>-<code class="docutils literal"><span class="pre">else</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="comparisonops.html">5.4. More Conditional Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifelsechained.html">5.5. Multiple Tests and <code class="docutils literal"><span class="pre">if</span></code>-<code class="docutils literal"><span class="pre">else</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifpitfalls.html">5.6. If-statement Pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="compoundconditions.html">5.7. Compound Boolean Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifnested.html">5.8. Nested <code class="docutils literal"><span class="pre">if</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewdecisions.html">5.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="while.html">6. While Loops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="whilestatements.html">6.1. While-Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="while-with-sequence.html">6.2. While-Statements with Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="whileinteractive.html">6.3. Interactive <code class="docutils literal"><span class="pre">while</span></code> Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="condition-short-circuit.html">6.4. Short-Circuiting &amp;&amp; and ||</a></li>
<li class="toctree-l2"><a class="reference internal" href="whileexamples.html">6.5. While Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="stringmethods2.html">6.6. More String Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="userinput.html">6.7. User Input: UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcdexamples.html">6.8. Greatest Common Divisor</a></li>
<li class="toctree-l2"><a class="reference internal" href="do-while.html">6.9. Do-While Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-number-game.html">6.10. Number Guessing Game Lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewwhile.html">6.11. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="foreach.html">7. Foreach Loops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="foreachintro.html">7.1. <code class="docutils literal"><span class="pre">foreach</span></code> Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="foreachexamples.html">7.2. <code class="docutils literal"><span class="pre">foreach</span></code> Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewforeach.html">7.3. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="for.html">8. For Loops</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forstatements.html">8.1. For-Statement Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="forexamples.html">8.2. Examples With <code class="docutils literal"><span class="pre">for</span></code> Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-nested-loops.html">8.3. Lab: Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewfor.html">8.4. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="files.html">9. Files, Paths, and Directories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fileabstraction.html">9.1. Files As Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="filewrite.html">9.2. Writing Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileread.html">9.3. Reading Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="paths.html">9.4. Path Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html">9.5. Directory Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="dir-file.html#file-class">9.6. File Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmdline-execution.html">9.7. Command Line Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="fio.html">9.8. FIO Helper Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewfiles.html">9.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="arrays.html">10. Arrays</a><ul>
<li class="toctree-l2"><a class="reference internal" href="onedim.html">10.1. One Dimensional Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="music.html">10.2. Musical Scales and Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="searching.html">10.3. Linear Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="sorting.html">10.4. Sorting Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="binarysearching.html">10.5. Binary Searching</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-array1d.html">10.6. Lab: Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-searching-arrays-lists-maps.html">10.7. Lab: Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="twodim.html">10.8. Multi-dimensional Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewarrays.html">10.9. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lists.html">11. Lists</a><ul>
<li class="toctree-l2"><a class="reference internal" href="listsyntax.html">11.1. List Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="dotnetapi.html">11.2. .Net Library (API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewlists.html">11.3. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dictionaries.html">12. Dictionaries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dictionarysyntax.html">12.1. Dictionary Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="dictionaryefficiency.html">12.2. Dictionary Efficiency</a></li>
<li class="toctree-l2"><a class="reference internal" href="dictionaryexamples.html">12.3. Dictionary Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-filedata.html">12.4. Lab: File Data and Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewdictionaries.html">12.5. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="classes.html">13. Classes and Object-Oriented Programming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="a-first-class.html">13.1. A First Example of Class Instances: Contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="classexamples.html">13.2. Class Instance Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="rational.html">13.3. The Rational Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="planning_classes.html">13.4. Planning A Class Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="classes-and-structs.html">13.5. Classes And Structs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">13.6. Defining Operators (Optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewclasses.html">13.7. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">14. Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="testing.html#assertions">14.1. Assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#attributes">14.2. Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#testing-the-constructor">14.3. Testing the Constructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#testing-rational-comparisons">14.4. Testing Rational Comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#testing-rational-arithmetic">14.5. Testing Rational Arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#testing-rational-conversions-to-other-types">14.6. Testing Rational Conversions (to other types)</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#testing-the-parsing-feature">14.7. Testing the Parsing Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#running-the-nunit-tests">14.8. Running the NUnit Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interfaces.html">15. Interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fractions-revisited.html">15.1. Rationals Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="csproj-revisited.html">15.2. Csproject Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="reviewinterfaces.html">15.3. Chapter Review Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="recursion.html">16. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastructures.html">17. Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">18. Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="monotools.html">18.1. Development Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="xamarinstudio.html">18.2. Xamarin Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="cmdline.html">18.3. Command Line Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="precedence.html">18.4. Precedence of Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="homework-gradecalculation.html">18.5. Homework: Grade Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="homework-gradecalculation2.html">18.6. Homework: Grade Calculation from Individual Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="hw-gradefiles.html">18.7. Homework: Grade File</a></li>
<li class="toctree-l2"><a class="reference internal" href="hw-booklist.html">18.8. Homework: Book List</a></li>
<li class="toctree-l2"><a class="reference internal" href="project.html">18.9. Group Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="lab-versioncontrol.html">18.10. Lab: Version Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="hgteamwork.html">18.11. Mercurial and Teamwork</a></li>
<li class="toctree-l2"><a class="reference internal" href="acknowledgments.html">18.12. Acknowledgments</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">13.6. Defining Operators (Optional)</a><ul>
<li><a class="reference internal" href="#operator-overloading">13.6.1. Operator Overloading</a></li>
<li><a class="reference internal" href="#casts-in-user-defined-classes">13.6.2. Casts in User-Defined Classes</a><ul>
<li><a class="reference internal" href="#operator-overloading-exercise">13.6.2.1. Operator Overloading Exercise</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="classes-and-structs.html" title="Previous Chapter: 13.5. Classes And Structs">
      <span class="glyphicon glyphicon-chevron-left"></span>
    </a>
  </li>
  <li>
    <a href="reviewclasses.html" title="Next Chapter: 13.7. Chapter Review Questions">
      <span class="glyphicon glyphicon-chevron-right"></span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/overload-op.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="defining-operators-optional">
<span id="defining-operators"></span><h1>13.6. Defining Operators (Optional)<a class="headerlink" href="#defining-operators-optional" title="Permalink to this headline">¶</a></h1>
<div class="section" id="operator-overloading">
<span id="overloading-operators"></span><span id="index-0"></span><h2>13.6.1. Operator Overloading<a class="headerlink" href="#operator-overloading" title="Permalink to this headline">¶</a></h2>
<p>The Rational class is a fine example of a useful utility class.
Still, to an experienced user, it has a striking deficiency:
A Rational is a <em>number</em> and we are used to doing arithmetic with
standard operators.  We would like to replace the mouthful
<code class="docutils literal"><span class="pre">frac1.Multiply(frac2)</span></code> by our common symbolism for multiplication,
<code class="docutils literal"><span class="pre">frac1*frac2</span></code>.  This can be coded in C#, using <em>operator overloading</em> to
give new meanings to the operator <code class="docutils literal"><span class="pre">*</span></code>.  The C# syntax is illustrated in the
variant of the Rational class in
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/rational_ops_stub/rational.cs">rational_ops_stub/rational.cs</a>.  This class also contains code
discussed in the
next section, <a class="reference internal" href="#casts-in-user-classes"><span>Casts in User-Defined Classes</span></a>.
Here are operator overload declarations for <code class="docutils literal"><span class="pre">*</span></code> and others:</p>
<div class="highlight-csharp"><div class="highlight"><pre>      <span class="c1">/// * binary multiplication operator </span>
      <span class="k">public</span> <span class="k">static</span> <span class="n">Rational</span> <span class="k">operator</span> <span class="p">*(</span><span class="n">Rational</span> <span class="n">f1</span><span class="p">,</span> <span class="n">Rational</span> <span class="n">f2</span><span class="p">)</span>
      <span class="p">{</span>                          
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Rational</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="n">num</span><span class="p">*</span><span class="n">f2</span><span class="p">.</span><span class="n">num</span><span class="p">,</span> <span class="n">f1</span><span class="p">.</span><span class="n">denom</span><span class="p">*</span><span class="n">f2</span><span class="p">.</span><span class="n">denom</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">/// - unary negation operator</span>
      <span class="k">public</span> <span class="k">static</span> <span class="n">Rational</span> <span class="k">operator</span> <span class="p">-</span> <span class="p">(</span><span class="n">Rational</span> <span class="n">r</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Rational</span><span class="p">(-</span><span class="n">r</span><span class="p">.</span><span class="n">num</span><span class="p">,</span> <span class="n">r</span><span class="p">.</span><span class="n">denom</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">/// binary == operator</span>
      <span class="k">public</span> <span class="k">static</span> <span class="n">Boolean</span> <span class="k">operator</span> <span class="p">==(</span><span class="n">Rational</span> <span class="n">f1</span><span class="p">,</span> <span class="n">Rational</span> <span class="n">f2</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">f1</span><span class="p">.</span><span class="n">num</span> <span class="p">==</span> <span class="n">f2</span><span class="p">.</span><span class="n">num</span> <span class="p">&amp;&amp;</span> <span class="n">f1</span><span class="p">.</span><span class="n">denom</span> <span class="p">==</span> <span class="n">f2</span><span class="p">.</span><span class="n">denom</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">/// binary != operator</span>
      <span class="k">public</span> <span class="k">static</span> <span class="n">Boolean</span> <span class="k">operator</span> <span class="p">!=(</span><span class="n">Rational</span> <span class="n">f1</span><span class="p">,</span> <span class="n">Rational</span> <span class="n">f2</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="n">f1</span><span class="p">.</span><span class="n">num</span> <span class="p">!=</span> <span class="n">f2</span><span class="p">.</span><span class="n">num</span> <span class="p">||</span> <span class="n">f1</span><span class="p">.</span><span class="n">denom</span> <span class="p">!=</span> <span class="n">f2</span><span class="p">.</span><span class="n">denom</span><span class="p">;</span>
      <span class="p">}</span> <span class="c1">// or extra call, but clearly consistent: return !(f1 == f2)</span>
</pre></div>
</div>
<p>All operator overload headings have the special form</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">public</span> <span class="pre">static</span></code> <em>returnType</em> <code class="docutils literal"><span class="pre">operator</span></code> opSymbol <code class="docutils literal"><span class="pre">(</span></code> <em>parameters</em> <code class="docutils literal"><span class="pre">)</span></code></div></blockquote>
<p>Here opSymbol can be any arithmetic or comparison operator, or
some other operators that we have not discussed.  So something like
<code class="docutils literal"><span class="pre">operator</span> <span class="pre">*</span></code> or <code class="docutils literal"><span class="pre">operator</span> <span class="pre">-</span></code> replaces the method name.
Binary operations like multiplication require two operands, and hence the
method has two parameters.
The method
computes and returns the named return type in the normal fashion.
In general
at least one of the parameters must be of the type of the class being defined.</p>
<p>(We could have directly defined four further overloads of <code class="docutils literal"><span class="pre">*</span></code>,
with the first or second parameter
being an <code class="docutils literal"><span class="pre">int</span></code> or a <code class="docutils literal"><span class="pre">double</span></code>, but we will avoid that by also adding methods
to provide implicit <a class="reference internal" href="#casts-in-user-classes"><span>Casts in User-Defined Classes</span></a>.)</p>
<p>The <code class="docutils literal"><span class="pre">-</span></code> symbol is special, since it can be used either as a unary operator for
negation, or as a binary operator for subtraction.  Since we include only
one parameter above, we are defining the unary version.</p>
<p>The operator does not need to produce a result of the same type.  We
included <code class="docutils literal"><span class="pre">==</span></code> and <code class="docutils literal"><span class="pre">!=</span></code> as examples (returning a <code class="docutils literal"><span class="pre">Boolean</span></code>).</p>
<p>(These methods
do not cause compiler errors, but warnings are generated:
We have not added further more advanced
overrides of Equals and HashCode methods, that are ideally in sync with
the meaning of <code class="docutils literal"><span class="pre">==</span></code>.  You should see a discussion of these methods in a
data structures course, like Loyola&#8217;s Comp 271.)</p>
<p>The class is a stub,
and <a class="reference internal" href="#overloading-operator-exercise"><span>Operator Overloading Exercise</span></a>
invites you to add further operator overloads.</p>
<p id="index-1"><strong>Precedence</strong>:  Note that the operator overloading method definitions include
nothing about <a class="reference internal" href="precedence.html#precedence"><span>Precedence of Operators</span></a>. That is because the precedence of operators
is fixed across the whole language. Unary <code class="docutils literal"><span class="pre">-</span></code> has higher
precedence than <code class="docutils literal"><span class="pre">*</span></code> ... no matter what the types involved.</p>
<p>An example testing class also uses the new casting syntax of next section:</p>
</div>
<div class="section" id="casts-in-user-defined-classes">
<span id="casts-in-user-classes"></span><span id="index-2"></span><h2>13.6.2. Casts in User-Defined Classes<a class="headerlink" href="#casts-in-user-defined-classes" title="Permalink to this headline">¶</a></h2>
<p>We have discussed casts before.  We know that an <code class="docutils literal"><span class="pre">int</span></code> can also be represented
as a <code class="docutils literal"><span class="pre">double</span></code> with an integer value, and the cast from <code class="docutils literal"><span class="pre">int</span></code> to <code class="docutils literal"><span class="pre">double</span></code>
is done implicitly
when needed:  An expression like <code class="docutils literal"><span class="pre">3.2</span> <span class="pre">*</span> <span class="pre">2</span></code> is processed by the compiler,
<em>implicitly</em> casting the
2 to <code class="docutils literal"><span class="pre">double</span></code> 2.0, and then doing a <code class="docutils literal"><span class="pre">double</span></code> multiplication.
The same idea makes sense with an
<code class="docutils literal"><span class="pre">int</span></code> <code class="docutils literal"><span class="pre">n</span></code> and a Rational <code class="docutils literal"><span class="pre">f</span></code>.  We only defined the operator overload <code class="docutils literal"><span class="pre">*</span></code>
for two Rationals, so in our code so far, <code class="docutils literal"><span class="pre">f</span> <span class="pre">*</span> <span class="pre">n</span></code> does not make sense.
Mathematically an integer is rational, so mathematically, it should make sense.
We bridge this difference by defining an implicit cast of an <code class="docutils literal"><span class="pre">int</span></code> to a Rational,
so  the compiler will take <code class="docutils literal"><span class="pre">f</span> <span class="pre">*</span> <span class="pre">n</span></code> and see the need to implicitly cast
<code class="docutils literal"><span class="pre">n</span></code> to a Rational.  The definition below will also allow explicit casts
if you choose, like <code class="docutils literal"><span class="pre">f</span> <span class="pre">*</span> <span class="pre">(Rational)</span> <span class="pre">n</span></code>:</p>
<div class="highlight-csharp"><div class="highlight"><pre>      <span class="c1">/// Code to cast an int to a Rational implicitly when needed. </span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">implicit</span> <span class="k">operator</span> <span class="nf">Rational</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nf">Rational</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
      <span class="p">}</span>
</pre></div>
</div>
<p>Again it is
the heading that takes a special form, starting with
<code class="docutils literal"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">implicit</span> <span class="pre">operator</span></code> followed by the type being cast to,
like Rational, while the parameter is the starting type, like <code class="docutils literal"><span class="pre">int</span></code>.
This is not like a regular method with its return type and method name.
Here it looks something like a constructor with a type in place of a method
name, but a constructor would not start with <code class="docutils literal"><span class="pre">static</span> <span class="pre">implicit</span> <span class="pre">operator</span></code>!</p>
<p>Now consider a <code class="docutils literal"><span class="pre">double</span></code> <code class="docutils literal"><span class="pre">d</span></code> and a Rational <code class="docutils literal"><span class="pre">f</span></code>.
We would like to allow an expression like
<code class="docutils literal"><span class="pre">d</span> <span class="pre">*</span> <span class="pre">f</span></code>.
Again, the operator overload for <code class="docutils literal"><span class="pre">*</span></code> does not allow this directly, so consider
implicit casts:  Since
a <code class="docutils literal"><span class="pre">double</span></code> is only an approximation, in general,
it would not be wise to implicitly convert
a <code class="docutils literal"><span class="pre">double</span></code> to a Rational, but it does make sense to approximate a Rational
by a <code class="docutils literal"><span class="pre">double</span></code> before use with a <code class="docutils literal"><span class="pre">double</span></code>:</p>
<div class="highlight-csharp"><div class="highlight"><pre>      <span class="c1">/// Code to cast to a double implicitly when needed. </span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">implicit</span> <span class="k">operator</span> <span class="nf">double</span><span class="p">(</span><span class="n">Rational</span> <span class="n">f</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">f</span><span class="p">.</span><span class="n">num</span><span class="p">/</span><span class="n">f</span><span class="p">.</span><span class="n">denom</span><span class="p">;</span>
      <span class="p">}</span>
</pre></div>
</div>
<p>The general format of such an implicit cast in a user-defined class is:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">public</span> <span class="pre">static</span> <span class="pre">implicit</span> <span class="pre">operator</span></code> <em>resultType</em> <code class="docutils literal"><span class="pre">(</span></code> <em>sourceType</em> <em>paramName</em> <code class="docutils literal"><span class="pre">)</span></code></div></blockquote>
<p>One of the two types should be the type of the containing class.
We have illustrated both combinations.</p>
<p>Finally, you need to be <em>very careful where you declare implicit casts</em>, to
make sure you are not being overly general, and maybe allowing
trouble in a form that may be very hard to debug:
It is much harder to foresee and trace implicit actions than explicit actions.
You are
<em>safe</em>, but more <em>verbose</em>, if you <em>only allow explicit</em> casts.  For example,
we have already seen these required for a cast from <code class="docutils literal"><span class="pre">double</span></code> to <code class="docutils literal"><span class="pre">int</span></code>.
To only allow an explicit cast with your type,
replace <code class="docutils literal"><span class="pre">implicit</span></code> by <code class="docutils literal"><span class="pre">explicit</span></code> in the cast method heading.</p>
<div class="highlight-csharp" id="decimal-type"><span id="index-3"></span><div class="highlight"><pre>      <span class="c1">/// Code to cast to a decimal with an explicit cast. </span>
      <span class="k">public</span> <span class="k">static</span> <span class="k">explicit</span> <span class="k">operator</span> <span class="nf">decimal</span><span class="p">(</span><span class="n">Rational</span> <span class="n">f</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">return</span> <span class="p">(</span><span class="kt">decimal</span><span class="p">)</span><span class="n">f</span><span class="p">.</span><span class="n">num</span><span class="p">/</span><span class="n">f</span><span class="p">.</span><span class="n">denom</span><span class="p">;</span>
      <span class="p">}</span>
</pre></div>
</div>
<p><strong>The decimal type</strong>:  Though we have not used the
<code class="docutils literal"><span class="pre">decimal</span></code> type before, we use it here for contrast to illustrate a cast
from Rational to <code class="docutils literal"><span class="pre">decimal</span></code> that can only be used explicitly, as in
<code class="docutils literal"><span class="pre">(decimal)</span> <span class="pre">f</span></code>:</p>
<p>Example
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/rational_ops_stub/test_ops.cs">rational_ops_stub/test_ops.cs</a> tests all of the operator overloads
and casts shown for a Rational.  Look at the source code and run it.
Note where overloaded operators are used and where implicit and explicit casts
to or from a Rational are used.</p>
<p>The example also illustrates a special feature
of the <code class="docutils literal"><span class="pre">decimal</span></code> type.  While a <code class="docutils literal"><span class="pre">double</span></code> is encoded with a power of 2, so
0.1 is <em>not</em> stored accurately, a <code class="docutils literal"><span class="pre">decimal</span></code> is encoded with a power of 10, so
exact decimal values with up to 28 digits can be stored and manipulated.
(This is important for <em>monetary calculations</em>, so a <code class="docutils literal"><span class="pre">decimal</span></code> literal
has <strong>m</strong> for money appended, like  <code class="docutils literal"><span class="pre">5.99m</span></code>, representing the mathematical
quantity 5.99 <em>exactly</em>.)</p>
<div class="section" id="operator-overloading-exercise">
<span id="overloading-operator-exercise"></span><span id="index-4"></span><h3>13.6.2.1. Operator Overloading Exercise<a class="headerlink" href="#operator-overloading-exercise" title="Permalink to this headline">¶</a></h3>
<p>The classes discussed above from example project
<a class="reference external" href="https://github.com/LoyolaChicagoBooks/introcs-csharp-examples/blob/master/rational_ops_stub">rational_ops_stub</a>
are incomplete.  Add the
overloaded binary operators  /, +, -, &lt;, &gt;, &lt;= and &gt;= to the Rational class,
and extend the TestOps class to test them.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Andrew N. Harrington and George Thiruvathukal.<br/>
      Last updated on 05-July-2015 03:45:21.<br/>
    </p>
  </div>
</footer>
  </body>
</html>